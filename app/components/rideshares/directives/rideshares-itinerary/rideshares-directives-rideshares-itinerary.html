<form
        name="RidesharesForm"
        id="RidesharesForm"
        novalidate
        ng-submit="vm.addPlace()">

    <div flex layout="row" layout-margin layout-fill layout-padding
         style="white-space: nowrap;">

        <fieldset>
            <legend>
                <ng-md-icon style="fill: blue" icon="directions" size="18"></ng-md-icon>
                &nbsp;Waypoints
            </legend>

            <input
                    name="place"
                    id="place"
                    type="text"
                    ng-model="vm.place"
                    ng-autocomplete="vm.place"
                    details="vm.placeDetails"/>

            <md-button
                    id="add_place"
                    class="md-raised md-primary"
                    ng-disabled="!vm.place || !vm.placeDetails"
                    ng-click="submit()">+ Add Place
            </md-button>

            <div ng-if="vm.isSmall()"
                 ng-repeat="place in vm.itinerary.route"
                 id="place_{{ $index }}"
                 style="display: flex; flex-direction: row; flex-wrap: nowrap; font-size: 18px; margin-bottom: 0.5em"
                 pick-a-date
                 pick-a-time>
                <ng-md-icon style="fill: green; cursor: pointer;" icon="swap_vert" size="18"
                            ng-click="vm.itinerary.route.move($index,$index+1)"
                            ng-if="$index + 1 < vm.itinerary.route.length"></ng-md-icon>
                <ng-md-icon style="fill: blue" icon="place" size="18"
                            ng-if="$index + 1 === vm.itinerary.route.length"></ng-md-icon>
                &nbsp;&nbsp;
                <ng-md-icon style="fill: red; cursor: pointer;" icon="cancel" size="18"
                            ng-click="vm.routeRemove(vm.itinerary.route, $index)"></ng-md-icon>
                &nbsp;&nbsp;

                {{ ::place.place }}

                &nbsp;
                <ng-md-icon style="fill: blue" icon="schedule" size="18"></ng-md-icon>
                &nbsp;

                <div style="position: relative">
                    <input
                            id="place_{{ $index }}_date"
                            placeholder="Departure or Arrival Date"
                            ng-model="vm.itinerary.route[$index].date"/>
                </div>

                &nbsp;@&nbsp;

                <div style="position: relative">
                    <input
                            id="place_{{ $index }}_time"
                            placeholder="Departure or Arrival Time"
                            ng-model="vm.itinerary.route[$index].time"/>
                </div>


            </div>

            <div ng-if="!vm.isSmall()"
                 ng-repeat="place in vm.itinerary.route"
                 id="place2_{{ $index }}"
                 style="display: flex; flex-direction: column; font-size: 18px"
                 pick-a-date
                 pick-a-time>


                <div flex>
                    <ng-md-icon style="fill: green; cursor: pointer;" icon="swap_vert" size="18"
                                ng-click="vm.itinerary.route.move($index,$index+1)"
                                ng-if="$index + 1 < vm.itinerary.route.length"></ng-md-icon>
                    <ng-md-icon style="fill: blue" icon="place" size="18"
                                ng-if="$index + 1 === vm.itinerary.route.length"></ng-md-icon>
                    &nbsp;&nbsp;
                    <ng-md-icon style="fill: red; cursor: pointer;" icon="cancel" size="18"
                                ng-click="vm.routeRemove(vm.itinerary.route, $index)"></ng-md-icon>
                    &nbsp;&nbsp;

                    {{ ::place.place }}

                </div>


                <div style="display: flex; flex-direction: column">
                    <div style="display: flex; flex-direction: row; padding-left: 3em; margin: 0.3em 0 0.3em 0">
                        &nbsp;
                        <ng-md-icon style="fill: blue" icon="schedule" size="18"></ng-md-icon>
                        &nbsp;
                        <div style="position: relative">
                            <input
                                    id="place2_{{ $index }}_date"
                                    placeholder="Departure or Arrival Date"
                                    ng-model="vm.itinerary.route[$index].date"/>
                        </div>
                    </div>

                    <div style="display: flex; flex-direction: row; padding-left: 3em; margin: 0.3em 0 0.3em 0">
                        &nbsp;@&nbsp;
                        <div style="position: relative">
                            <input
                                    id="place2_{{ $index }}_time"
                                    placeholder="Departure or Arrival Time"
                                    ng-model="vm.itinerary.route[$index].time"/>
                        </div>
                    </div>
                </div>


            </div>

        </fieldset>

    </div>

    <div flex layout-gt-sm="row" layout-sm="column" layout-margin layout-fill ng-if="vm.itinerary.route.length > 1" class="animate-if">

        <div flex>
            <fieldset>
                <legend>
                    <ng-md-icon style="fill: blue" icon="time_to_leave" size="18"></ng-md-icon>
                    &nbsp;Rideshare Details
                </legend>
                <table>
                    <tr>
                        <td><span style="font-weight: bold">Type</span>:&nbsp;
                            <md-select
                                    name="type"
                                    ng-model="vm.itinerary.type">
                                <md-option ng-repeat="o in vm.types" value="{{o}}">{{o}}</md-option>
                            </md-select>
                        </td>
                    </tr>
                    <tr>
                        <td><span style="font-weight: bold">Trip</span>:&nbsp;
                            <md-select
                                    name="trip"
                                    ng-model="vm.itinerary.trip">
                                <md-option ng-repeat="o in vm.trips" value="{{o}}">{{o}}</md-option>
                            </md-select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span style="font-weight: bold">Frequency</span>:&nbsp;
                            <md-select
                                    name="frequency"
                                    ng-model="vm.itinerary.frequency">
                                <md-option ng-repeat="o in vm.frequencies" value="{{o}}">{{o}}</md-option>
                            </md-select>
                            <!--Frequency:-->
                            <!--<select-->
                            <!--name="frequency"-->
                            <!--ng-model="vm.itinerary.frequency"-->
                            <!--ng-options="o as o for o in vm.frequencies"></select>-->
                        </td>
                    </tr>
                </table>
            </fieldset>

        </div>

        <div flex>
            <fieldset>
                <legend>
                    <ng-md-icon style="fill: blue" icon="settings" size="18"></ng-md-icon>
                    &nbsp;Vehicle Details
                </legend>
                <span style="font-weight: bold">Type</span>:&nbsp;
                <md-select
                        name="vehicle"
                        ng-model="vm.itinerary.vehicle">
                    <md-option ng-repeat="o in vm.vehicleTypes" value="{{o}}">{{o}}</md-option>
                </md-select>

                <br/>

                <span style="font-weight: bold">Available Seats</span>:&nbsp;
                <md-select
                        name="seats"
                        ng-model="vm.itinerary.seats">
                    <md-option ng-repeat="o in vm.seats" value="{{o}}">{{o}}</md-option>
                </md-select>

                <br/>

                <span style="font-weight: bold">Luggage</span>:&nbsp;
                <md-select
                        name="luggage"
                        ng-model="vm.itinerary.luggage">
                    <md-option ng-repeat="o in vm.luggage" value="{{o}}">{{o}}</md-option>
                </md-select>

                <br/>
                <br/>

                <span style="font-weight: bold">Share Driving</span>:&nbsp;
                <md-radio-group ng-model="vm.itinerary.shareDriving" class="md-primary">
                    <md-radio-button ng-repeat="d in vm.shareDriving"
                                     ng-value="d.value">
                        {{ d.label }}
                    </md-radio-button>
                </md-radio-group>

                <br/>

                <span style="font-weight: bold">Smoking</span>:&nbsp;
                <md-radio-group ng-model="vm.itinerary.smoking" class="md-primary">
                    <md-radio-button ng-repeat="d in vm.smoking"
                                     ng-value="d.value">
                        {{ d.label }}
                    </md-radio-button>
                </md-radio-group>

            </fieldset>
        </div>

        <div ng-if="vm.isSmall()" flex>&nbsp;</div>

    </div>

    <div flex layout-fill layout-margin ng-if="vm.itinerary.route.length > 1" class="animate-if">
        <div style="display: flex; flex-direction: row; flex-wrap: nowrap">
            <md-button
                    id="save_rideshare"
                    class="md-raised md-primary"
                    ng-if="vm.itinerary.route.length > 1"
                    ng-disabled="!vm.isRouteValid"
                    ng-click="vm.save()">
                <img src="images/icons/green_tick.svg" height="18px"/>
                Save Rideshare&nbsp;
            </md-button>
            &nbsp;
            <md-button
                    id="remove_rideshare"
                    class="md-raised md-warn"
                    ng-if="vm.isOwner"
                    ng-click="vm.confirmRemove($event)">
                <img src="images/icons/trash.svg" height="18px"/>
                Remove Rideshare&nbsp;
            </md-button>
        </div>
    </div>

</form>

<div flex layout="column" layout-fill layout-margin ng-if="vm.itinerary.route.length > 1">
    <div flex>
        <div class="rideshare__map">
            <rsm-rideshares-map
                    route="vm.itinerary.route"></rsm-rideshares-map>
        </div>
    </div>
</div>
